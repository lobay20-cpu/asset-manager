{% extends "base.html" %}

{% block title %}Panel Administracyjny{% endblock %}

{% block content %}
    <hgroup>
        <h2>Panel Administracyjny</h2>
        <p>Zarządzaj kluczowymi elementami systemu.</p>
    </hgroup>
    
    <div class="grid">
        <!-- Lewa kolumna: Zarządzanie Urządzeniami -->
        <article>
            <h4>Zarządzanie Urządzeniami</h4>
            <a href="{{ url_for('dodaj_urzadzenie') }}" role="button">Dodaj nowe urządzenie</a>
        </article>

        <!-- Prawa kolumna: Zarządzanie Grupami -->
        <article>
            <h4>Zarządzanie Grupami</h4>
            
            <table>
                <thead>
                    <tr>
                        <th>Nazwa Grupy</th>
                        <th>Skrót</th>
                        <th>Akcje</th>
                    </tr>
                </thead>
                <tbody>
                    {% for grupa in wszystkie_grupy %}
                    <tr>
                        <td>{{ grupa.nazwa_grupy }}</td>
                        <td>{{ grupa.skrot }}</td>
                        <td>
                            <a href="{{ url_for('edytuj_grupe', grupa_id=grupa.id) }}">Edytuj</a> | 
                            <a href="{{ url_for('usun_grupe', grupa_id=grupa.id) }}" style="color: var(--pico-color-red-500);" onclick="return confirm('Czy na pewno chcesz usunąć tę grupę? Ta operacja jest nieodwracalna.')">Usuń</a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="3"><i>Brak zdefiniowanych grup.</i></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <br>
            <a href="{{ url_for('dodaj_grupe') }}" role="button">Dodaj nową grupę</a>
        </article>

<!-- NOWA KOLUMNA: Użytkownicy -->
        <article>
            <h4>Zarządzanie Użytkownikami</h4>
            <table>
                
                
                <thead>
    <tr>
        <th>Imię i Nazwisko</th>
        <th>Status</th>
        <th>Akcje</th>
    </tr>
</thead>
<tbody>
    {% for user in wszyscy_uzytkownicy %}
    <tr>
        <td>{{ user.imie_nazwisko }}</td>
        <td>
            {% if user.is_active %}
                <span style="color: green;">Aktywny</span>
            {% else %}
                <span style="color: red;">Nieaktywny</span>
            {% endif %}
        </td>
        <td>
            <a href="{{ url_for('edytuj_uzytkownika', user_id=user.id) }}">Edytuj</a> | 
            <a href="{{ url_for('zmien_status_uzytkownika', user_id=user.id) }}">
                {% if user.is_active %}Dezaktywuj{% else %}Aktywuj{% endif %}
            </a>
        </td>
    </tr>
    {% endfor %}
</tbody>
      
        </table>
            <!-- PRZENIESIONY PRZYCISK JEST TERAZ POD TABELĄ, ALE NADAL W <article> -->
            <br>
            <a href="{{ url_for('dodaj_uzytkownika') }}" role="button">Dodaj nowego użytkownika</a>
        </article>

    </div>
{% endblock %}